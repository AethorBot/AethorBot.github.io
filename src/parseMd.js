"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const fs_1 = require("fs");
const path_1 = require("path");
const child_process_1 = require("child_process");
const chalk_1 = require("chalk");
const showdown_1 = tslib_1.__importDefault(require("showdown"));
const showdown = new showdown_1.default.Converter();
showdown.setFlavor("github");
const topnav = fs_1.readFileSync(path_1.join(__dirname, "global", "topnav.html"), "utf-8");
const head = fs_1.readFileSync(path_1.join(__dirname, "global", "head.html"), "utf-8");
const breef = "Malil general-purpose bot with Slash-Commands";
const compiler = new (class Compiler {
    constructor({ scss, md, css, html }) {
        this.scssdir = scss;
        this.mddir = md;
        this.cssdir = css;
        this.htmldir = html;
    }
    async compileScss() {
        for (const file of fs_1.readdirSync(this.scssdir).filter((file) => file.endsWith(".scss"))) {
            console.time(chalk_1.cyan(file));
            const scss = path_1.join(this.scssdir, file);
            const css = path_1.join(this.cssdir, file.replace(".scss", ".css"));
            child_process_1.exec(`yarn sass ${scss} ${css}`);
            console.timeEnd(chalk_1.cyan(file));
        }
    }
    async compileTf() {
        for (const file of fs_1.readdirSync(path_1.join(this.mddir)).filter((file) => file.endsWith("md"))) {
            console.time(chalk_1.blue(file));
            const html = fs_1.readFileSync(path_1.join(this.mddir, file), "utf-8").split("{!")[0];
            const md = fs_1.readFileSync(path_1.join(this.mddir, file), "utf-8").split("{!")[1];
            const converted = showdown.makeHtml(md);
            const dir = path_1.join(this.htmldir, file.replace(".md", ".html"));
            const out = html
                .replace("{{input}}", converted)
                .replace("{{topnav}}", topnav)
                .replace("{{head}}", head)
                .replace("{{breef}}", breef)
                .replace("{{title}}", file.replace("md", ""));
            fs_1.writeFileSync(dir, out);
            console.timeEnd(chalk_1.blue(file));
        }
    }
    async compile() {
        this.compileScss();
        this.compileTf();
        console.time(chalk_1.green("Formatted"));
        child_process_1.exec("npx prettier-eslint --write ./public/**/**", () => console.timeEnd(chalk_1.green("Formatted")));
    }
})({
    scss: path_1.join(__dirname, "scss"),
    md: path_1.join(__dirname, "md"),
    css: path_1.join(__dirname, "..", "public", "css"),
    html: path_1.join(__dirname, ".."),
});
compiler.compile();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2VNZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBhcnNlTWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkJBQThEO0FBQzlELCtCQUE0QjtBQUM1QixpREFBcUM7QUFDckMsaUNBQTBDO0FBQzFDLGdFQUFnQztBQUNoQyxNQUFNLFFBQVEsR0FBRyxJQUFJLGtCQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDMUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM3QixNQUFNLE1BQU0sR0FBRyxpQkFBWSxDQUFDLFdBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQy9FLE1BQU0sSUFBSSxHQUFHLGlCQUFZLENBQUMsV0FBSSxDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsV0FBVyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDM0UsTUFBTSxLQUFLLEdBQUcsK0NBQStDLENBQUM7QUFFOUQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sUUFBUTtJQUtuQyxZQUFZLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUEyRDtRQUMzRixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUNsQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0lBQ0QsS0FBSyxDQUFDLFdBQVc7UUFDaEIsS0FBSyxNQUFNLElBQUksSUFBSSxnQkFBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRTtZQUN0RixPQUFPLENBQUMs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QUksQ0FBQztDQUMzQixDQUFDLENBQUM7QUFDSCxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMsIHJlYWRkaXJTeW5jIH0gZnJvbSBcImZzXCI7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWMgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHsgZ3JlZW4sIGJsdWUsIGN5YW4gfSBmcm9tIFwiY2hhbGtcIjtcbmltcG9ydCBTaG93ZG93biBmcm9tIFwic2hvd2Rvd25cIjtcbmNvbnN0IHNob3dkb3duID0gbmV3IFNob3dkb3duLkNvbnZlcnRlcigpO1xuc2hvd2Rvd24uc2V0Rmxhdm9yKFwiZ2l0aHViXCIpO1xuY29uc3QgdG9wbmF2ID0gcmVhZEZpbGVTeW5jKGpvaW4oX19kaXJuYW1lLCBcImdsb2JhbFwiLCBcInRvcG5hdi5odG1sXCIpLCBcInV0Zi04XCIpO1xuY29uc3QgaGVhZCA9IHJlYWRGaWxlU3luYyhqb2luKF9fZGlybmFtZSwgXCJnbG9iYWxcIiwgXCJoZWFkLmh0bWxcIiksIFwidXRmLThcIik7XG5jb25zdCBicmVlZiA9IFwiTWFsaWwgZ2VuZXJhbC1wdXJwb3NlIGJvdCB3aXRoIFNsYXNoLUNvbW1hbmRzXCI7XG5cbmNvbnN0IGNvbXBpbGVyID0gbmV3IChjbGFzcyBDb21waWxlciB7XG5cdHNjc3NkaXI6IHN0cmluZztcblx0bWRkaXI6IHN0cmluZztcblx0Y3NzZGlyOiBzdHJpbmc7XG5cdGh0bWxkaXI6IHN0cmluZztcblx0Y29uc3RydWN0b3IoeyBzY3NzLCBtZCwgY3NzLCBodG1sIH06IHsgc2Nzczogc3RyaW5nOyBtZDogc3RyaW5nOyBjc3M6IHN0cmluZzsgaHRtbDogc3RyaW5nIH0pIHtcblx0XHR0aGlzLnNjc3NkaXIgPSBzY3NzO1xuXHRcdHRoaXMubWRkaXIgPSBtZDtcblx0XHR0aGlzLmNzc2RpciA9IGNzcztcblx0XHR0aGlzLmh0bWxkaXIgPSBodG1sO1xuXHR9XG5cdGFzeW5jIGNvbXBpbGVTY3NzKCkge1xuXHRcdGZvciAoY29uc3QgZmlsZSBvZiByZWFkZGlyU3luYyh0aGlzLnNjc3NkaXIpLmZpbHRlcigoZmlsZSkgPT4gZmlsZS5lbmRzV2l0aChcIi5zY3NzXCIpKSkge1xuXHRcdFx0Y29uc29sZS50aW1lKGN5YW4oZmlsZSkpO1xuXHRcdFx0Y29uc3Qgc2NzcyA9IGpvaW4odGhpcy5zY3NzZGlyLCBmaWxlKTtcblx0XHRcdGNvbnN0IGNzcyA9IGpvaW4odGhpcy5jc3NkaXIsIGZpbGUucmVwbGFjZShcIi5zY3NzXCIsIFwiLmNzc1wiKSk7XG5cdFx0XHRleGVjKGB5YXJuIHNhc3MgJHtzY3NzfSAke2Nzc31gKTtcblx0XHRcdGNvbnNvbGUudGltZUVuZChjeWFuKGZpbGUpKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgY29tcGlsZVRmKCkge1xuXHRcdGZvciAoY29uc3QgZmlsZSBvZiByZWFkZGlyU3luYyhqb2luKHRoaXMubWRkaXIpKS5maWx0ZXIoKGZpbGUpID0+IGZpbGUuZW5kc1dpdGgoXCJtZFwiKSkpIHtcblx0XHRcdGNvbnNvbGUudGltZShibHVlKGZpbGUpKTtcblx0XHRcdGNvbnN0IGh0bWwgPSByZWFkRmlsZVN5bmMoam9pbih0aGlzLm1kZGlyLCBmaWxlKSwgXCJ1dGYtOFwiKS5zcGxpdChcInshXCIpWzBdO1xuXHRcdFx0Y29uc3QgbWQgPSByZWFkRmlsZVN5bmMoam9pbih0aGlzLm1kZGlyLCBmaWxlKSwgXCJ1dGYtOFwiKS5zcGxpdChcInshXCIpWzFdO1xuXHRcdFx0Y29uc3QgY29udmVydGVkID0gc2hvd2Rvd24ubWFrZUh0bWwobWQpO1xuXHRcdFx0Y29uc3QgZGlyID0gam9pbih0aGlzLmh0bWxkaXIsIGZpbGUucmVwbGFjZShcIi5tZFwiLCBcIi5odG1sXCIpKTtcblxuXHRcdFx0Y29uc3Qgb3V0ID0gaHRtbFxuXHRcdFx0XHQucmVwbGFjZShcInt7aW5wdXR9fVwiLCBjb252ZXJ0ZWQpXG5cblx0XHRcdFx0LnJlcGxhY2UoXCJ7e3RvcG5hdn19XCIsIHRvcG5hdilcblxuXHRcdFx0XHQucmVwbGFjZShcInt7aGVhZH19XCIsIGhlYWQpXG5cblx0XHRcdFx0LnJlcGxhY2UoXCJ7e2JyZWVmfX1cIiwgYnJlZWYpXG5cblx0XHRcdFx0LnJlcGxhY2UoXCJ7e3RpdGxlfX1cIiwgZmlsZS5yZXBsYWNlKFwibWRcIiwgXCJcIikpO1xuXG5cdFx0XHR3cml0ZUZpbGVTeW5jKGRpciwgb3V0KTtcblx0XHRcdGNvbnNvbGUudGltZUVuZChibHVlKGZpbGUpKTtcblx0XHR9XG5cdH1cblx0YXN5bmMgY29tcGlsZSgpIHtcblx0XHR0aGlzLmNvbXBpbGVTY3NzKCk7XG5cdFx0dGhpcy5jb21waWxlVGYoKTtcblx0XHRjb25zb2xlLnRpbWUoZ3JlZW4oXCJGb3JtYXR0ZWRcIikpO1xuXHRcdGV4ZWMoXCJucHggcHJldHRpZXItZXNsaW50IC0td3JpdGUgLi9wdWJsaWMvKiovKipcIiwgKCkgPT4gY29uc29sZS50aW1lRW5kKGdyZWVuKFwiRm9ybWF0dGVkXCIpKSk7XG5cdH1cbn0pKHtcblx0c2Nzczogam9pbihfX2Rpcm5hbWUsIFwic2Nzc1wiKSxcblx0bWQ6IGpvaW4oX19kaXJuYW1lLCBcIm1kXCIpLFxuXHRjc3M6IGpvaW4oX19kaXJuYW1lLCBcIi4uXCIsIFwicHVibGljXCIsIFwiY3NzXCIpLFxuXHRodG1sOiBqb2luKF9fZGlybmFtZSwgXCIuLlwiKSxcbn0pO1xuY29tcGlsZXIuY29tcGlsZSgpO1xuIl19